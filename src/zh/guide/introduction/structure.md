---
title: 集群架构
order: 2
---

## openGemini集群架构

![structure](https://foruda.gitee.com/images/1682675209590994535/58ceef69_1024705.png)

如图所示，openGemini整体上由ts-sql、ts-meta、ts-stores三个组件组成

- **ts-sql**

对外提供统一的读写接口。在数据写入方面，校验接收到的数据格式，再根据时间线名称进行hash打散，转发数据到对应的ts-store节点进行存储；在数据查询方面，根据请求生成分布式查询计划，分发各子查询计划到每个ts-store节点，最后汇总数据并返回Client。

ts-sql是无状态的，可以根据业务负载进行横向扩展。

- **ts-meta**

管理数据库系统中的数据库、表、数据分区、数据保留策略、集群等元数据信息。

- **ts-store**

数据存储和查询。采用类LSM Tree结构，数据追加写入；数据查询时，执行子查询计划，从倒排索引中检索查询涉及的时间线，数据读取后，根据查询条件过滤数据，再返回数据到ts-sql。

同样可以根据业务负载进行ts-store节点的横向扩展，暂不支持缩容。
