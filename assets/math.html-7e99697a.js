import{_ as e,X as o,Y as t,$ as a,a1 as s,Z as p,a3 as l,C as r}from"./framework-1e2d737a.js";const d={},c={href:"https://golang.org/ref/spec#Operator_precedence",target:"_blank",rel:"noopener noreferrer"},i=a("code",null,"5 / 2 + 3 * 2 = (5 / 2) + (3 * 2)",-1),u=a("code",null,"5 + 2 * 3 - 2 = 5 + (2 * 3) - 2",-1),k=l(`<h2 id="数学运算符" tabindex="-1"><a class="header-anchor" href="#数学运算符" aria-hidden="true">#</a> 数学运算符</h2><h3 id="加法" tabindex="-1"><a class="header-anchor" href="#加法" aria-hidden="true">#</a> 加法</h3><p>与常数相加</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token keyword">FROM</span> <span class="token string">&quot;add&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;add&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token operator">&gt;</span> <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>两个field相加</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;add&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;add&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">&gt;=</span> <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="减法" tabindex="-1"><a class="header-anchor" href="#减法" aria-hidden="true">#</a> 减法</h3><p>与常数相减</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token string">&quot;A&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;sub&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;sub&quot;</span> <span class="token keyword">WHERE</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">&lt;=</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>两个field相减</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">-</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;sub&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;sub&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">-</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">&lt;=</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="乘法" tabindex="-1"><a class="header-anchor" href="#乘法" aria-hidden="true">#</a> 乘法</h3><p>与常数相乘</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token string">&quot;A&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">&gt;=</span> <span class="token number">20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>两个field相乘</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">*</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">*</span> <span class="token string">&quot;C&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">*</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">&lt;=</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>乘法分布在其它运算符上</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span> <span class="token operator">-</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">-</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">-</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="除法" tabindex="-1"><a class="header-anchor" href="#除法" aria-hidden="true">#</a> 除法</h3><p>与常数相除</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token string">&quot;A&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;div&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;div&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">/</span> <span class="token number">10</span> <span class="token operator">&lt;=</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>两个field相除</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">/</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;div&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;div&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">/</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">&gt;=</span> <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>除法分布在其它运算符上</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;mult&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="模" tabindex="-1"><a class="header-anchor" href="#模" aria-hidden="true">#</a> 模</h3><p>与常数进行模运算</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token keyword">FROM</span> <span class="token string">&quot;modulo&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;modulo&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>对两个field进行模运算</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">%</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;modulo&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;modulo&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">%</span> <span class="token string">&quot;B&quot;</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="按位and" tabindex="-1"><a class="header-anchor" href="#按位and" aria-hidden="true">#</a> 按位AND</h3><p>您可以将这个运算符与任何整数或布尔值一起使用，无论它们是field还是常数。这个运算符不适用于浮点数或字符串，并且您也不能将整数和布尔值混合在一起计算。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">&amp;</span> <span class="token number">255</span> <span class="token keyword">FROM</span> <span class="token string">&quot;bitfields&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">&amp;</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;bitfields&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;data&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;bitfield&quot;</span> <span class="token operator">&amp;</span> <span class="token number">15</span> <span class="token operator">&gt;</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">&amp;</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;booleans&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span> <span class="token operator">^</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;booleans&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="按位or" tabindex="-1"><a class="header-anchor" href="#按位or" aria-hidden="true">#</a> 按位OR</h3><p>您可以将这个运算符与任何整数或布尔值一起使用，无论它们是field还是常数。这个运算符不适用于浮点数或字符串，并且您也不能将整数和布尔值混合在一起计算。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">|</span> <span class="token number">5</span> <span class="token keyword">FROM</span> <span class="token string">&quot;bitfields&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;bitfields&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;data&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;bitfield&quot;</span> <span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">=</span> <span class="token number">12</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="按位异或" tabindex="-1"><a class="header-anchor" href="#按位异或" aria-hidden="true">#</a> 按位异或</h3><p>您可以将这个运算符与任何整数或布尔值一起使用，无论它们是field还是常数。这个运算符不适用于浮点数或字符串，并且您也不能将整数和布尔值混合在一起计算。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">^</span> <span class="token number">255</span> <span class="token keyword">FROM</span> <span class="token string">&quot;bitfields&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">^</span> <span class="token string">&quot;B&quot;</span> <span class="token keyword">FROM</span> <span class="token string">&quot;bitfields&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&quot;data&quot;</span> <span class="token keyword">WHERE</span> <span class="token string">&quot;bitfield&quot;</span> <span class="token operator">^</span> <span class="token number">6</span> <span class="token operator">&gt;</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="数学运算符的常见问题" tabindex="-1"><a class="header-anchor" href="#数学运算符的常见问题" aria-hidden="true">#</a> 数学运算符的常见问题</h3><p><strong>问题一：数学运算符与通配符或正则表达式同时使用</strong><br> openGemini不支持在SELECT子句中将数学运算与通配符(<code>*</code>)或正则表达式结合使用。以下查询是无效的，系统会返回错误：</p><p>对通配符执行数学运算</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token keyword">FROM</span> <span class="token string">&quot;nope&quot;</span>
ERR: error parsing query: syntax error: unexpected <span class="token keyword">ADD</span><span class="token punctuation">,</span> expecting <span class="token keyword">FROM</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>对函数中的通配符执行数学运算</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token keyword">FROM</span> <span class="token string">&quot;nope&quot;</span>
ERR: unsupported expression <span class="token keyword">with</span> wildcard: <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>对正则表达式执行数学运算</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">/</span>A<span class="token operator">/</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token keyword">FROM</span> <span class="token string">&quot;nope&quot;</span>
ERR: cannot perform a <span class="token keyword">binary</span> expression <span class="token keyword">on</span> two literals
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>对函数中的正则表达式执行数学运算</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">/</span>A<span class="token operator">/</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token keyword">FROM</span> <span class="token string">&quot;nope&quot;</span>
ERR: unsupported expression <span class="token keyword">with</span> regex field: <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>问题二：数学运算符与函数同时使用</strong></p><p>目前不支持在函数内使用数学运算。请注意，openGemini只允许在<code>SELECT</code>子句中使用函数。</p><p>例如</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">*</span> mean<span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;cpu&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>语句没有问题，但会产生一个解析错误。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> mean<span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;cpu&quot;</span>
ERR: expected field argument <span class="token operator">in</span> mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="不支持的运算符" tabindex="-1"><a class="header-anchor" href="#不支持的运算符" aria-hidden="true">#</a> 不支持的运算符</h2><h3 id="逻辑运算符" tabindex="-1"><a class="header-anchor" href="#逻辑运算符" aria-hidden="true">#</a> 逻辑运算符</h3><p>使用<code>!|</code>、<code>NAND</code>、<code>XOR</code>或<code>NOR</code>会产生解析错误。</p><p>另外，在查询的<code>SELECT</code>子句中使用<code>AND</code>或者<code>OR</code>并不会跟使用数学运算符的效果一样，只会产生空的结果，因为<code>AND</code>和<code>OR</code>都是GeminiQL中的标记(tokens)。但是，您可以对布尔类型的数据使用按位操作符：<code>&amp;</code>、<code>|</code>和<code>^</code></p><h3 id="bitwise-not" tabindex="-1"><a class="header-anchor" href="#bitwise-not" aria-hidden="true">#</a> Bitwise Not</h3><p>没有bitwise not运算符，因为您期望的结果依赖您的bitfield的宽度。GeminiQL不知道您的bitfield的宽度，所以无法实现一个合适的bitwise not运算符。</p><p>例如，如果您的bitfield的宽是8比特(bit)，那么整数<code>1</code>表示比特<code>0000 0001</code>，bitwise-not操作后应该返回比特<code>1111 1110</code>，也就是整数254。</p><p>但是，如果您的bitfield的宽是16比特(bit)，那么整数<code>1</code>表示比特<code>0000 0000 0000 0001</code>，bitwise-not操作后应该返回比特<code>1111 1111 1111 1110</code>，也就是整数65534。</p><p><strong>解决方法</strong></p><p>您可以通过使用<code>^</code>(bitwise xor)运算符和全部比特位都为<code>1</code>的数字（比特<code>1</code>的个数等于您的bitfield的宽度）来实现bitwise not运算：</p><p>对于8比特的数据(8-bit data)：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">^</span> <span class="token number">255</span> <span class="token keyword">FROM</span> <span class="token string">&quot;data&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>对于16比特的数据(16-bit data)：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">^</span> <span class="token number">65535</span> <span class="token keyword">FROM</span> <span class="token string">&quot;data&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>对于32比特的数据(32-bit data)：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token string">&quot;A&quot;</span> <span class="token operator">^</span> <span class="token number">4294967295</span> <span class="token keyword">FROM</span> <span class="token string">&quot;data&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在每种情况下，您需要的常数可以这样计算：<code>(2 ** width) - 1</code>，即2的<code>width</code>次方减去1。</p>`,92);function q(g,v){const n=r("ExternalLinkIcon");return o(),t("div",null,[a("p",null,[s("数学运算符遵循"),a("a",c,[s("标准的运算顺序"),p(n)]),s("。也就是说，括号优先于除法和乘法，除法和乘法优先于加法和减法，例如，"),i,s(" and "),u,s("。")]),k])}const b=e(d,[["render",q],["__file","math.html.vue"]]);export{b as default};
